from "../stdlib/Slice.shtk" use Slice, allocateHeap

struct Foobar {}

fn deconstructor(self: Foobar) 
{
    println("Deconstructor for foobar")
}

fn createFoobar() -> Foobar 
{
    var self: Foobar
    return self
}

fn main() -> int
{
    const a := make(Slice[Foobar], [createFoobar(), createFoobar(), createFoobar()])

    var b := allocateHeap[Foobar](2)
    b.copy([createFoobar(), createFoobar()], 2)

    var c := allocateHeap[Foobar](2)
    c.copy([createFoobar(), createFoobar()], 2)
    c.free()

    return 0
}